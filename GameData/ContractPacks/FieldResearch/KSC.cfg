// Contract for gathering science from around KSC.
//   Author: nightingale

CONTRACT_TYPE
{
    name = FS_KSC
    group = FieldResearch

    title = Field Research: Perform experiments around KSC
    description = There are lots of opportunities to do science around the Kerbal Space Center.  Wernher needs us to run a few tests at different locations as a control test of our experiments.
    synopsis = Run the required tests around the Kerbal Space Center and recover the data.
    completedMessage = Everything is looking good with these experiments, time to get them into space!

    // Can only have one of these
    maxSimultaneous = 1

    // Level 1 prestige
    prestige = Trivial

    // Always offered by the Field Research Team
    agent = Field Research Team

    targetBody = HomeWorld()

    // Contract rewards
    rewardFunds = 30000.0
    rewardReputation = 2.0

    // This one shouldn't show up quite as frequently
    weight = 0.5

    DATA
    {
        type = List<Biome>
        biomes = MainKSCBiomes()
    }

    DATA
    {
        type = List<ScienceExperiment>
        experiments = AvailableExperiments(@targetBody).ExcludeAll([ evaReport, crewReport ])
    }

    DATA
    {
        type = List<ScienceSubject>
        scienceSubjectsTemp1 = AllScienceSubjectsByBiomeExperiment(@biomes, @experiments)
        scienceSubjects = @scienceSubjectsTemp1.Where(s => s.CollectedScience() == 0.0).Random(4)
    }

    DATA
    {
        type = ScienceSubject
        ss0 = @scienceSubjects.ElementAt(0)
        ss1 = @scienceSubjects.ElementAt(1)
        ss2 = @scienceSubjects.ElementAt(2)
        ss3 = @scienceSubjects.ElementAt(3)
    }

    PARAMETER
    {
        name = CollectScience0
        type = CollectScience

        rewardFunds = Random(5000.0, 8000.0)

        biome = @/ss0.Biome()
        situation = @/ss0.Situation()
        experiment = @/ss0.Experiment()
        recoveryMethod = Ideal
    }

    PARAMETER
    {
        name = CollectScience1
        type = CollectScience

        rewardFunds = Random(5000.0, 8000.0)

        biome = @/ss1.Biome()
        situation = @/ss1.Situation()
        experiment = @/ss1.Experiment()
        recoveryMethod = Ideal
    }

    PARAMETER
    {
        name = CollectScience2
        type = CollectScience

        rewardFunds = Random(5000.0, 8000.0)

        biome = @/ss2.Biome()
        situation = @/ss2.Situation()
        experiment = @/ss2.Experiment()
        recoveryMethod = Ideal
    }

    PARAMETER
    {
        name = CollectScience3
        type = CollectScience

        rewardFunds = Random(5000.0, 8000.0)

        biome = @/ss3.Biome()
        situation = @/ss3.Situation()
        experiment = @/ss3.Experiment()
        recoveryMethod = Ideal
    }

    REQUIREMENT
    {
        type = PartModuleTypeUnlocked

        partModuleType = Wheel
    }

    // Once the player goes interplanetary, stop offering this one
    REQUIREMENT
    {
        type = Orbit
        
        invertRequirement = true

        targetBody = Sun
    }
}
